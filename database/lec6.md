# lec6

`dbms`如何移动磁盘和内存上的数据？

## buffer pool manager
缓冲池，池内有`frame`也就是`buffer cache`。
`latch`更底层，`lock`更上层
缓冲池可以有多个，因为多处理器使用一个缓冲池会因为锁而导致性能下降严重

### 数据预取
1. 在顺序扫描页面时可以预取页面
2. 在范围查找数据时，可以预取物理页面不相邻的数据库逻辑页
  - 比如b+树的相邻叶子节点属性值相近，但是并不是物理相邻的页面

### 共享扫描
比如
- `select SUM(val) from A`
- `select AVG(val) from A`
第二条指令执行时可以与第一条一起进行扫描(第一条指令已经扫描了部分数据)，第一条扫描完成后第二条指令继续从头扫描到自己开始的位置。

### buffer pool bypass
如果大批量的顺序读写，可能不需要缓冲池也可以获得较好的性能.

**`dbms`不使用os的`io`，因为不可控。**
## 分配策略